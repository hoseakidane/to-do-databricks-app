bundle:
  name: databricks_app_bundle_testing

variables:
  prod_root_path:
    description: "Prod deployment path"
    default: "/Workspace/Users/hosea.kidane@databricks.com/.bundle/databricks_app_bundle_testing/prod"
  prod_users:
    description: "App users"
    default: "hosea.kidane@databricks.com"
  prod_sp:
    description: "Prod SP id for deployment and changes"
    default: "hk-account-level-sp" 

permissions:
  - group_name: users
    level: CAN_VIEW

resources:
  apps:
    todo_list_app_bundle:
      name: 'todo-list-app'
      source_code_path: .
      description: 'Todo list app for testing app bundle deployment'
      permissions:
        - user_name: ${var.prod_users}
          level: CAN_USE

targets:
  dev:
    mode: development
    default: true
    workspace:
      profile: DEFAULT
    permissions:
      - user_name: ${var.prod_users}
        level: CAN_MANAGE

  prod:
    mode: production
    workspace:
      host: https://fe-sandbox-serverless-182sr3.cloud.databricks.com/
      root_path: ${var.prod_root_path}
    permissions:
      - service_principal_name: ${var.prod_sp}
        level: CAN_MANAGE 

